<html lang="en">

<head>
    <!-- Alpine Plugins -->
    <script defer src="https://unpkg.com/@uilix/fragmentor@0.0.7/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    <!-- Alpine Core -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script defer>
        const loading_image = `<img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">`
    </script>

    <title>AlpineJS Fragmentor</title>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            background: whitesmoke;
        }

        .example-card {
            border: 1px solid #ccc;
            width: 800px;
            margin: 20px auto 0 auto;
            padding: 0.5em;
            background: white;
            border-radius: 0.5em;
        }

        .example-card-header {
            padding: 0.6em 0.5em 0.6em 0.5em;
            font-weight: bold;
            font-size: 1.2em;
            border-bottom: 1px solid #ccc;
        }

        .example-card-body {
            padding: 0.6em 0.5em 0.6em 0.5em;
        }
    </style>

</head>

<body>

<div x-data>


    <div class="example-card" style="text-align: center">
        <h1>AlpineJS fragmentor plugin examples</h1>
        <h4>NOTE: You are viewing the github pages example, page load delays will not show.</h4>
    </div>

    <div class="example-card">
            <textarea style="width: 100%; height: 100px" disabled>
<!-- Alpine Plugins -->
<script defer src="https://unpkg.com/@uilix/fragmentor@0.0.7/dist/cdn.min.js"></script>
<script defer src="https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
<!-- Alpine Core -->
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
            </textarea>
    </div>


    <div class="example-card">
        <div class="example-card-header">x-fregmentor attribute</div>

        <div class="example-card-body">
            <p>x-fragmentor:get="url_of_route" will replace the current elements content with the response.</p>
            <textarea style="width: 100%; height: 80px" disabled>
<div x-data>
    <div x-fragmentor:get="/alpinejs_fragmentor/sloth.html"></div>
</div>
            </textarea>
            <p>x-fragmentor:method.delay.[int]ms="url_of_route" will delay the fetch call.</p>
            <textarea style="width: 100%; height: 80px" disabled>
<div x-data>
    <div x-fragmentor:get.delay.1000ms="/alpinejs_fragmentor/sloth.html"></div>
</div>
            </textarea>
        </div>
    </div>


    <div class="example-card">
        <div class="example-card-header">$fregmentor magic call</div>

        <div class="example-card-body">
            <p>$fragmentor('url to get html from', 'element to push response to', 'html sent to loader', 'element for loader html')</p>
            <textarea style="width: 100%; height: 300px" disabled>
<!-- will update itself with the response html -->
<div x-data>
    <div x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')"></div>
</div>

<!-- will update goHere with the response html -->
<div x-data>
    <div x-init="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.goHere)"></div>
    <div x-ref="goHere"></div>
</div>

<!-- will update goHere with the response html, and update the current element with the text loading... for the length of the response. -->
<div x-data>
    <div x-init="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.goHere, 'loading...')"></div>
    <div x-ref="goHere"></div>
</div>
            </textarea>
            <p>you can only really use 'html sent to loader' and 'element for loader html' with @click (x-on:click)</p>
            <textarea style="width: 100%; height: 280px" disabled>
<!-- Will update the button text to 'loading...', send the response to goHere then revert the button text back to 'click me' -->
<div x-data>
    <button @click="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.goHere, 'loading...')"">click me</button>
    <div x-ref="goHere"></div>
</div>

<!-- Will update the loadingText html to show the sloth.jpg image, send the response to goHere then revert the loadingText html back to being blank -->
<div x-data>
    <button @click="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.goHere, '<img src="sloth.jpg">', $refs.loadingText)"">click me</button>
    <div x-ref="loadingText"></div>
    <div x-ref="goHere"></div>
</div>
            </textarea>
        </div>
    </div>

    <div class="example-card">
        <div class="example-card-header">$fregmentor_markup magic call</div>

        <div class="example-card-body">
            <p>$fragmentor('html to send to element', 'element to push html to')</p>
            <textarea style="width: 100%; height: 150px" disabled>

<!-- Will update the goHere html to show the sloth.jpg image -->
<div x-data>
    <button @click="$fragmentor_markup('<img src="sloth.jpg">', $refs.goHere)"">click me</button>
    <div x-ref="goHere"></div>
</div>

            </textarea>
        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of a standard x-fragmentor attribute call.</div>

        <div class="example-card-body">
            <p>div element:</p>
            <code>
                x-fragmentor:get="/alpinejs_fragmentor/sloth.html"
            </code>
            <div style="padding: 20px;" x-fragmentor:get="/alpinejs_fragmentor/sloth.html">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>


    <div class="example-card">

        <div class="example-card-header">Example of a standard x-fragmentor attribute call, but the Flask route is set to sleep for 0.5 secs.</div>

        <div class="example-card-body">
            <p>This results in the loading icon showing until the response has been returned.</p>
            <code>
                x-fragmentor:get="/alpinejs_fragmentor/sloth.html"
            </code>
            <div style="padding: 20px;" x-fragmentor:get="/alpinejs_fragmentor/sloth.html">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of a x-fragmentor attribute call, with a delay on the request.</div>

        <div class="example-card-body">
            <p>This is used to allow certain fragments to be delayed in their loading.</p>
            <code>
                x-fragmentor:get.delay.1000ms="/alpinejs_fragmentor/sloth.html"
            </code>
            <div style="padding: 20px;" x-fragmentor:get.delay.1000ms="/alpinejs_fragmentor/sloth.html">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>


    <div class="example-card">

        <div class="example-card-header">Example of the fragmentor magic call pushing the response to another element on the page using Alpine refs.</div>

        <div class="example-card-body">
            <p>Fragmentor will send the contents of the response to another element using alpinejs x-ref.</p>
            <code>
                x-init="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.fragment1)"
            </code>

            <div x-init="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.fragment1)">

            </div>

            <div style="padding: 20px;" x-ref="fragment1" style="padding-bottom: 20px">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>


    <div class="example-card">

        <div class="example-card-header">Example of a fragmentor magic call, with a button to switch content.</div>

        <div class="example-card-body">
            <p>Button:</p>
            <code>
                @click="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry)"
            </code>
            <p>Entry div:</p>
            <code>
                x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')" x-ref="entry"
            </code>

            <div style="padding: 20px">
                <button @click="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry)">Show Sloth</button>
                <button @click="$fragmentor('/alpinejs_fragmentor/table.html', $refs.entry)">Show Table</button>
            </div>

            <div style="padding: 20px" x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')" x-ref="entry">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>


    <div class="example-card">

        <div class="example-card-header">Example of a fragmentor magic call with a button to switch content.
            Uses the fragmentor_markup magic call to show loading.
        </div>

        <div class="example-card-body">

            <p>$fragmentor_markup sends a loading image to the element that will then be updated with the route response from $fragmentor.</p>


            <p>Button:</p>
            <code>
                @click="$fragmentor_markup(loading_image, $refs.entry2); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry2)"
            </code>

            <p>Entry div:</p>
            <code>
                x-init="$fragmentor('/alpinejs_fragmentor/sloth.html-sloth')" x-ref="entry2"
            </code>

            <div style="padding: 20px;">
                <button @click="$fragmentor_markup(loading_image, $refs.entry2); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry2)">
                    Show Sloth
                </button>
                <button @click="$fragmentor_markup(loading_image, $refs.entry2); $fragmentor('/alpinejs_fragmentor/table.html', $refs.entry2)">
                    Show Table
                </button>
            </div>

            <div style="padding: 20px;" x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')" x-ref="entry2">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of a fragmentor magic call that switches the current elements content to the specified markup when clicked.
        </div>

        <div class="example-card-body">

            <p>Will change the button text to Loading..., then when the response is successful it will switch the contents back to the original contents</p>


            <p>Button:</p>
            <code>
                @click="$fragmentor_markup(loading_image, $refs.entry3); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry3, 'loading...')"
            </code>
            <p>Image in button</p>
            <code>
                @click="$fragmentor_markup(loading_image, $refs.entry3); $fragmentor('/alpinejs_fragmentor/table.html', $refs.entry3, loading_image)"
            </code>

            <p>Entry div:</p>
            <code>
                x-init="$fragmentor('/alpinejs_fragmentor/sloth.html-sloth')" x-ref="entry3"
            </code>

            <div style="padding: 20px;">
                <button @click="$fragmentor_markup(loading_image, $refs.entry3); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry3, 'loading...')">
                    Show Sloth
                </button>
                <button @click="$fragmentor_markup(loading_image, $refs.entry3); $fragmentor('/alpinejs_fragmentor/table.html', $refs.entry3, loading_image)">
                    Show Table
                </button>
            </div>

            <div style="padding: 20px;" x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')" x-ref="entry3">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of a fragmentor magic call with an example of pushing the loading markup to another element.
        </div>

        <div class="example-card-body">

            <p>When the button is clicked it will send 'loading...' to the contents of the x-ref specified after. After the response is successful, it will
                switch the contents back.</p>


            <p>Button:</p>
            <code>
                @click="$fragmentor_markup(loading_image, $refs.entry4); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry4, 'loading...',
                $refs.loadingMarker)"
            </code>

            <p>Loading marker div:</p>
            <code>
                x-ref="loadingMarker"
            </code>

            <p>Entry div:</p>
            <code>
                x-init="$fragmentor('/alpinejs_fragmentor/sloth.html-sloth')" x-ref="entry4"
            </code>

            <div style="padding: 20px;">
                <button @click="$fragmentor_markup(loading_image, $refs.entry4); $fragmentor('/alpinejs_fragmentor/sloth.html', $refs.entry4, 'loading...', $refs.loadingMarker)">
                    Show Sloth
                </button>
                <button @click="$fragmentor_markup(loading_image, $refs.entry4); $fragmentor('/alpinejs_fragmentor/table.html', $refs.entry4, 'loading...', $refs.loadingMarker)">
                    Show Table
                </button>
            </div>

            <div x-ref="loadingMarker" style="border: 1px solid black; padding: 10px">Loading marker box</div>

            <div style="padding: 20px;" x-init="$fragmentor('/alpinejs_fragmentor/sloth.html')" x-ref="entry4">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Scroll down for an example of the fragmentor working with x-intersect.</div>

        <div class="example-card-body">

            <div style="text-align: center; width: 100%;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <polyline points="19 12 12 19 5 12"></polyline>
                </svg>
            </div>

            <div style="height: 800px; width: 2px; background: black; margin: 0 auto">
            </div>

            <div style="text-align: center; width: 100%;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <polyline points="19 12 12 19 5 12"></polyline>
                </svg>
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of fragmentor working with x-intersect.</div>

        <div class="example-card-body">
            <p>The fetch call to the content will only happen when this element enters the viewport.</p>
            <code>
                x-intersect="$fragmentor('/alpinejs_fragmentor/sloth.html')"
            </code>
            <div style="padding: 20px;" x-intersect="$fragmentor('/alpinejs_fragmentor/sloth.html')">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>

    <div class="example-card">

        <div class="example-card-header">Example of fragmentor pushing being combined with x-intersect.</div>

        <div class="example-card-body">

            <p>This example is pushing the response to another element using x-ref.</p>
            <code>
                x-intersect="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.fragment2)"
            </code>

            <div x-intersect="$fragmentor('/alpinejs_fragmentor/sloth.html', $refs.fragment2)">

            </div>

            <div style="padding: 20px;" x-ref="fragment2">
                <img src="https://cheesecake87.github.io/alpinejs_fragmentor/static/puff.svg" alt="loading...">
            </div>

        </div>
    </div>


</div>

</body>

</html>